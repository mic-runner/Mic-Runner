<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>
    <script>
      const currentPath =
        window.location.pathname +
        window.location.search +
        window.location.hash;

      const redirectData = {
        path: window.location.pathname,
        searches: Object.fromEntries(
          new URLSearchParams(window.location.search)
        ),
      };

      const redirectQuery =
        "?redirect=" + encodeURIComponent(JSON.stringify(redirectData));

      window.location.replace("/" + redirectQuery);
    </script>
  </head>
  <body>
    <p>
      If you are not redirected, <a id="redirect-link" href="#">click here</a>.
    </p>
    <script>
      document.getElementById("redirect-link").href =
        "/?redirect=" +
        encodeURIComponent(
          JSON.stringify({
            path: window.location.pathname,
            searches: Object.fromEntries(
              new URLSearchParams(window.location.search)
            ),
          })
        );
    </script>
  </body>
</html>
